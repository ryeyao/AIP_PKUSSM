CC = gcc
CPP = g++

CFLAGS = -g -Wall

CFLAGS += -pthread

INCS = -I./include

CFLAGS += $(INCS)

TARGETS = bin/Server bin/Client

SERVER_C = src/Server.cc
SERVER_H = include/Server.h
SERVER_O = src/Server.o

CLIENT_C = src/Client.cc
CLIENT_H = include/Client.h
CLIENT_O = src/Client.o

HANDLERS_C = src/Handlers.cc
HANDLERS_H = include/Handlers.h
HANDLERS_O = src/Handlers.o

all: $(TARGETS)

bin/Server: $(SERVER_O) $(HANDLERS_O)
	$(CPP) $(CFLAGS) -o $@ $^

bin/Client: $(CLIENT_O)
	$(CPP) $(CFLAGS) -o $@ $^

src/Server.o: $(SERVER_C) $(SERVER_H) $(HANDLERS_H) 
	$(CPP) $(CFLAGS) -c $(SERVER_C)

src/Handlers.o: $(HANDLERS_C) $(HANDLERS_H) $(SERVER_H)
	$(CPP) $(CFLAGS) -c $(HANDLERS_C)

src/Client.o: $(CLIENT_C) $(CLIENT_H) 
	$(CPP) $(CFLAGS) -c $(CLIENT_C)

.PHONY:clean
clean:
	rm -f $(TARGETS)
	rm -f test
	rm src/*.o src/*.out
